var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var e=a.length,d=0;d<e;d++){var f=a[d];if(b.call(c,f,d,a))return{i:d,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}return globalThis};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,e){if(b){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in c||(c[d]={});c=c[d]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
var tmrFormatoTabla,tmrDatePicker,tmrfotosreportes,tmrCargaHora=setInterval(lblhora,1E3),tmrSeguridad=setInterval(seguridadjs,5E3),url="",map,darection;function seguridadjs(){$.ajax({dataType:"json",url:"../common_files/clases/seguridad_main_js.php",data:void 0,success:function(a){0<a.logout&&(location.href="../lock.php")}})}
function lblhora(){var a=new Date,b="Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" "),c="Domingo Lunes Martes Miercoles Jueves Viernes Sabado".split(" ");_("lblfecha").innerHTML=c[a.getDay()]+" "+a.getDate()+" de "+b[a.getMonth()]+" del "+a.getFullYear()+"  "+(10>a.getHours()?"0"+a.getHours():a.getHours())+":"+(10>a.getMinutes()?"0"+a.getMinutes():a.getMinutes())+":"+(10>a.getSeconds()?"0"+a.getSeconds():a.getSeconds());_("txtHora").value=c[a.getDay()]+
" "+a.getDate()+" de "+b[a.getMonth()]+" del "+a.getFullYear()+"  "+(10>a.getHours()?"0"+a.getHours():a.getHours())+":"+(10>a.getMinutes()?"0"+a.getMinutes():a.getMinutes())+":"+(10>a.getSeconds()?"0"+a.getSeconds():a.getSeconds())}
function formatoTabla(a,b,c,e,d,f,h,k){var g=document.getElementsByClassName("table");for(i=0;i<g.length;i++)g[i].getAttribute("id").match(/lst.*/)&&($("table#"+g[i].getAttribute("id")).DataTable({stateSave:!0,paging:a,retrieve:b,lengthChange:c,searching:e,ordering:d,info:f,autoWidth:h,dom:"Bfrtip",buttons:[k],language:{buttons:{print:"  Imprimir"},search:"Buscar:",info:"Mostrando _START_ a _END_ de _TOTAL_ registros",emptyTable:"No se encontraron registros",infoEmpty:"No se encontraron registros",
zeroRecords:"No se encontraron registros",paginate:{previous:"Anterior",next:"Siguiente"}}}),clearInterval(tmrFormatoTabla));clearInterval(tmrFormatoTabla)}function validateEmail(a){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())}
function validaUsuarioNuevo(){res="";""===_("txtNombre").value&&(res="Falta el nombre completo del usuario.<br>");""===_("txtLogin").value&&(res+="Falta el nombre de usuario para acceder al sistema.<br>");""===_("txtPassword").value&&(res+="Falta la contrase\u00f1a del usuario.<br>");""===_("txtEmail").value&&(res+="Falta el correo electronico del usuario.<br>");""===_("txtEmail").value||validateEmail(_("txtEmail").value)||(res+="El correo electronico no es valido.<br>");""===_("txtPassword2").value&&
(res+="Falta la confirmacion de la contrase\u00f1a del usuario.<br>");_("txtPassword2").value!==_("txtPassword").value&&(res+="La contrase\u00f1a y la confirmacion no coinciden.<br>");""!==_("txtPassword2").value&&""!==_("txtPassword").value&&_("txtPassword2").value===_("txtPassword").value&&5>_("txtPassword").value.length&&(res+="La contrase\u00f1a debe de ser de almenos 6 caracteres.<br>");$("#privilegios").val()||1!==_("tipo").value||(res+="Falta seleccionar al menos un privilegio de la lista.<br>");
return""!==res?(Swal.fire("Error!","Se encontraron algunos errores:<br><br>"+res+"<br>Favor de corregirlos antes de guardar.","error"),!1):!0}function tipoUsuarioNuevo(a,b){5===a?_("lblCliente").innerHTML="<strong>"+b+"</strong>":_("lblCliente").innerHTML=""}function valorListaChk(a,b){var c=[];$("#"+a).DataTable().rows().nodes().to$().find('input[type="checkbox"]').each(function(){this.checked&&(b?this.checked=!1:c.push($(this).val()))});a="";return a=c.join(",")}
function _(a){return document.getElementById(a)}
function uploadFile(a,b,c,e,d,f,h){var k=_(d).files.length;if(0===k)Swal.fire("Error!","Error, debe seleccionar al menos un archivo !","error");else for(i=0;i<k;i++){var g=_(d).files[i],l=new FormData;l.append(d,g);l.append(a,b);l.append("idcliente",c);"anticipo"===a&&(l.append("idregistro",f),l.append("uuid",h));g=new XMLHttpRequest;e&&(g.upload.addEventListener("progress",progressHandler,!1),g.addEventListener("load",completeHandler,!1),g.addEventListener("error",errorHandler,!1),g.addEventListener("abort",
abortHandler,!1));g.open("POST","subir_archivos.php");g.send(l)}}function progressHandler(a){_("loaded_n_total").innerHTML="Uploaded "+a.loaded+" bytes of "+a.total;a=a.loaded/a.total*100;_("progressBar").value=Math.round(a);_("status").innerHTML=Math.round(a)+"% Subiendo archivo, por favor espere..."}function completeHandler(a){_("status").innerHTML=a.target.responseText;_("progressBar").value=0;""!==url&&(ajaxpage(url,"contenido"),url="")}
function errorHandler(a){_("status").innerHTML="Fallo la carga !"}function abortHandler(a){_("status").innerHTML="Carga abortada !"}
function setDatePicker(){_("datepicker")&&($("#datepicker").datepicker({autoclose:!0,todayHighlight:!0,format:"yyyy-mm-dd"}),$("#datepicker").datepicker().on("changeDate",function(a){getPrecios(a.format("yyyy-mm-dd"));_("lblfacturafecha").innerHTML=a.format("yyyy-mm-dd");_("txtfacturafecha").value=a.format("yyyy-mm-dd");tmrFormatoTabla=setInterval(function(){formatoTabla(!0,!0,!1,!0,!1,!0,!0)},1E3)}),clearInterval(tmrDatePicker))}
function formatMoneda(a,b,c,e){b=isNaN(b=Math.abs(b))?2:b;c=void 0===c?".":c;e=void 0===e?",":e;var d=0>a?"-":"",f=String(parseInt(a=Math.abs(Number(a)||0).toFixed(b))),h=3<(h=f.length)?h%3:0;return d+(h?f.substr(0,h)+e:"")+f.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+e)+(b?c+Math.abs(a-f).toFixed(b).slice(2):"")}function carga_camara(){Webcam.set({width:640,height:480,image_format:"png",jpeg_quality:100});Webcam.attach("#camara")}
function take_snapshot(){Webcam.snap(function(a){_("camara").innerHTML='<img id="imgfoto_identificacion" src="'+a+'"/>';_("imgavatar").src=a;guardar_imagen_camara()})}function guardar_imagen_camara(){var a=_("imgfoto_identificacion").src;$.ajax({type:"POST",url:"subir_archivos.php",data:{foto_identidad:1,imagen:a}}).done(function(a){_("lblStatus").innerHTML="Im&aacute;gen guardada.";_("divReiniciaCamara").style="display: inline"})}
function cambiaavatar(a,b,c,e){_(e).onchange=function(d){d=(d.target||window.event.srcElement).files;if(FileReader&&d&&d.length){var f=new FileReader;f.onload=function(){_(a).src=f.result;"imgavatarusr2"===a&&(_("imgavatarusr").src=f.result);"imgavatar"===a&&(_("imgavatarid").src=f.result);uploadFile(b,1,c,!1,e,0,"")};f.readAsDataURL(d[0])}}}
function confirmacion(a,b,c,e,d,f,h,k,g){g=void 0===g?"":g;Swal.fire({title:h,text:k,type:"warning",heightAuto:!1,cancelButtonText:"Cancelar",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, estoy seguro!"}).then(function(h){if(h.value){Swal.fire("Hecho!","","success");switch(a){case 1:window.open("print.php?tipo=5&arrinteres="+arrlistaabono_interes.join(";")+"&idanticipo="+arrlistaabono.join(";")+"&abonoparcial="+abonoparcial+"&cantidad="+_("txtcantidad").value+
"&fecha="+_("datepickeranticipospago").value,"_blank");0<abonoparcial&&window.open("print.php?tipo=6&idanticipo="+arrlistaabono[arrlistaabono.length-1]+"&cantidad="+abonoapagar+"&fecha="+_("datepickeranticipospago").value,"_blank");abonoparcial=abonoapagar=0;arrlistaabono_interes=[];arrlistaabono=[];break;case 2:_(g.split("#")[0]).style="display:none",_(g.split("#")[1]).style="display:none"}ajaxpage(b+f,c);e&&(tmrFormatoTabla=setInterval(function(){formatoTabla(!0,!0,!1,!0,!1,!0,!0)},1E3));d&&(tmrDatePicker=
setInterval(setDatePicker,500))}})};
